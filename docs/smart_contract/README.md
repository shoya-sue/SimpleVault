# SimpleVault スマートコントラクト設計

## 概要
SimpleVaultはSolanaブロックチェーン上で動作するSPLトークンのための金庫システムです。ユーザーはトークンを預け入れ、引き出し、残高を確認することができます。

## 機能要件

### 1. 初期化 (Initialize)
- 金庫アカウントの作成
- ユーザーごとに独立した金庫を管理
- セキュリティのためのPDA（Program Derived Address）を使用

### 2. 預け入れ (Deposit)
- SPLトークンをユーザーのウォレットから金庫に預け入れる
- 預け入れ量の検証
- トランザクション署名の検証

### 3. 引き出し (Withdraw)
- 金庫からユーザーのウォレットにSPLトークンを引き出す
- 残高の検証
- 所有者認証（オーナーのみが引き出し可能）

### 4. 残高確認 (Query Balance)
- 金庫内のトークン残高を照会する
- 公開情報として誰でも照会可能

## 技術仕様

### アカウント構造
- `Vault`: 金庫情報を格納するアカウント
  - `owner`: 金庫所有者のPublicKey
  - `token_account`: 金庫のトークンアカウントのPublicKey
  - `bump`: PDAのbump seed

### インストラクション
1. `initialize` - 新しい金庫アカウントの作成
2. `deposit` - トークンの預け入れ
3. `withdraw` - トークンの引き出し
4. `query_balance` - 残高の照会

### エラー処理
- 残高不足エラー
- 認証エラー（Unauthorized）
- トークン転送エラー

## セキュリティ考慮事項
- PDAを使用した金庫アカウントの保護
- 適切な署名検証の実装
- 所有者のみが資金を引き出せるようにするアクセス制御

## テスト戦略
- 単体テスト: 各機能の正常動作を確認
- 異常系テスト: エラー処理の動作確認
- 統合テスト: フロントエンドとの連携確認

## デプロイ戦略
- ローカルテスト環境
- devnetでのテスト
- mainnetへの段階的デプロイ 